（建议[阅读原文](https://link.zhihu.com/?target=http%3A//littleshi.cn/online/ChainR.html) ）

  
**预备知识**　微分  
　　 若有两个一元函数 $f(x)$f(x) 和 $g(x)$g(x)， 我们可以把 $g$g 的函数值作为 $f$f 的自变量， 得到一个新的函数称为 $f(x)$f(x) 和 $g(x)$g(x) 的**复合函数**， 记为 $f[g(x)]$f[g(x)]．  
　　 如果我们已知两个函数 $f(x)$f(x) 和 $g(x)$g(x) 的导函数 $f'(x)$f'(x) 和 $g'(x)$g'(x)， 那么我们可以通过以下公式求复合函数 $f[g(x)]$f[g(x)] 的导数．  
  
$\begin{align}&f[g(x)]' = f'[g(x)]g'(x)&(1)\\\end{align}$\begin{align}&f[g(x)]'= f'[g(x)]g'(x)&(1)\\\end{align}  
  
对于多个函数的复合函数， 我们也有类似的公式， 例如  
$\begin{align}&f[g(h(x))]' = f'[g(h(x))]g'[h(x)]h'(x)&(2)\\\end{align}$\begin{align}&f[g(h(x))]'= f'[g(h(x))]g'[h(x)]h'(x)&(2)\\\end{align}  
  
  
**例 1**　基本初等函数的复合函数求导  
　　 我们已经知道基本初等函数的导数的导函数， 下面对它们的一些常见的复合函数进行求导．  
$\sin^2 x$\sin^2 x 可以看作幂函数 $f(x) = x^2$f(x) = x^2 和 $g(x) = \sin x$g(x) = \sin x 的复合函数， 已知 $f'(x) = 2x$f'(x) = 2x， $g'(x) = \cos x$g'(x) = \cos x， 代入[式 1](https://link.zhihu.com/?target=http%3A//wuli.wiki/changed/ChainR.html%23eq1) 得  
  
$\begin{align}&(\sin^2 x)' = 2\sin x \cos x&(3)\\\end{align}$\begin{align}&(\sin^2 x)' = 2\sin x \cos x&(3)\\\end{align}  
  
  
  
**几何理解**  
　　 为了方便表示，我们把 $g$g 的函数值和 $f$f 的自变量记为 $u$u， 把 $f$f 的函数值记为 $y$y．  

![](https://pic2.zhimg.com/v2-03b475db1015cf95758eb607f09f89e5_r.jpg)

图 1：可以将 $\sin^2 x$\sin^2 x 看做 $f(u) = u^2$f(u) = u^2 和 $g(x) = \sin x$g(x) = \sin x 的复合函数

  
　　 我们可以用类似[图 1](https://link.zhihu.com/?target=http%3A//wuli.wiki/changed/ChainR.html%23fig1) 的图像来直观地理解复合函数． 先画出 $y = f(u)$y = f(u) 和 $u = g(x)$u = g(x) 的图像，并将 $g(u)$g(u) 的图像逆时针旋转 90° 使得两图的 $u$u 轴对齐．这样对于任何定义域中的自变量 $x$x， 我们只需要先在 $g(x)$g(x) 的图中画出 $u$u 的位置， 再对应到 $f(u)$f(u) 的图像中求出 $y$y 的位置即可．  
　　 现在我们要讨论的问题是，若已知两函数的导函数 $f'(x)$f'(x) 和 $g'(u)$g'(u)（假设它们在定义域内处处可导）如何求复合函数 $f[g(x)]$f[g(x)] 的导数．  
　　 对于给定的 $x$x，我们先来看当 $x$x 增加 $\Delta x$\Delta x 时 $y$y 的增量 $\Delta y$\Delta y 的大小．我们可以使用与[图 1](https://link.zhihu.com/?target=http%3A//wuli.wiki/changed/ChainR.html%23fig1) 类似的方法画出[图 2](https://link.zhihu.com/?target=http%3A//wuli.wiki/changed/ChainR.html%23fig2) ，然后只需要令 $\Delta x \to 0$\Delta x \to 0， 就可以根据定义求出复合函数的导数  
  
$\begin{align}&f[g(x)]' = \frac{\mathrm{d}}{\mathrm{d}{x}} f[g(x)] = \lim_{\Delta x\to 0} \frac{\Delta y}{\Delta x}&(4)\\\end{align}$\begin{align}&f[g(x)]' = \frac{\mathrm{d}}{\mathrm{d}{x}} f[g(x)] = \lim_{\Delta x\to 0} \frac{\Delta y}{\Delta x}&(4)\\\end{align}  

![](https://pic4.zhimg.com/v2-9f9b30b6ded2515aced1f77d78e42de7_r.jpg)

图 2：用[图 1](https://link.zhihu.com/?target=http%3A//wuli.wiki/changed/ChainR.html%23fig1) 中的方法求出任意 $\Delta x$\Delta x 对应的 $\Delta y$\Delta y  

　　 在这个过程中，我们在得到 $\Delta y$\Delta y 之前先得到了 $u$u 的增量 $\Delta u$\Delta u． 当 $\Delta x$\Delta x 较小时有微分近似（[式 2](https://link.zhihu.com/?target=http%3A//wuli.wiki/changed/Diff.html%23eq2) ）  
  
$\begin{align}&\Delta {u} \approx g'(x) \Delta{x} \qquad \Delta{y} \approx f'(u) \Delta{u}&(5)\\\end{align}$\begin{align}&\Delta {u} \approx g'(x) \Delta{x} \qquad \Delta{y} \approx f'(u) \Delta{u}&(5)\\\end{align}  
  
当 $\Delta x \to 0$\Delta x \to 0 时对应的微分关系（[式 1](https://link.zhihu.com/?target=http%3A//wuli.wiki/changed/Diff.html%23eq1) ）为  
$\begin{align}&\,\mathrm{d}{u} = g'(x) \,\mathrm{d}{x} \qquad \,\mathrm{d}{y} = f'(u) \,\mathrm{d}{u}&(6)\\\end{align}$\begin{align}&\,\mathrm{d}{u} = g'(x) \,\mathrm{d}{x} \qquad \,\mathrm{d}{y} = f'(u) \,\mathrm{d}{u}&(6)\\\end{align}  
  
将上式中的左边代入右边得  
$\begin{align}&\,\mathrm{d}{y} = f'(u) g'(x) \,\mathrm{d}{x} = f'[g(x)]g'(x) \,\mathrm{d}{x}&(7)\\\end{align}$\begin{align}&\,\mathrm{d}{y} = f'(u) g'(x) \,\mathrm{d}{x} = f'[g(x)]g'(x) \,\mathrm{d}{x}&(7)\\\end{align}  
  
而复合函数的微分是  
$\begin{align}&\,\mathrm{d}{y} = f[g(x)]' \,\mathrm{d}{x}&(8)\\\end{align}$\begin{align}&\,\mathrm{d}{y} = f[g(x)]' \,\mathrm{d}{x}&(8)\\\end{align}  
  
对比以上两式（微分和导数的关系）得  
$\begin{align}&f[g(x)]' = f'[g(x)]g'(x)&(9)\\\end{align}$\begin{align}&f[g(x)]'= f'[g(x)]g'(x)&(9)\\\end{align}  
  
这就是复合函数的求导公式．  
　　 在上面的例子中  
  
$\begin{align}&g(x) = \sin x \qquad g'(x) = \cos x \qquad f(u) = u^2 \qquad f'(u) = 2u \qquad&(10)\\\end{align}$\begin{align}&g(x) = \sin x \qquad g'(x) = \cos x \qquad f(u) = u^2 \qquad f'(u) = 2u \qquad&(10)\\\end{align}  
  
代入上式得  
$\begin{align}&\frac{\mathrm{d}}{\mathrm{d}{x}} \sin^2 x = 2\sin x \cos x&(11)\\\end{align}$\begin{align}&\frac{\mathrm{d}}{\mathrm{d}{x}} \sin^2 x = 2\sin x \cos x&(11)\\\end{align}  
  
  
　　 复合函数的求导公式也叫**链式法则**， 原因是我们可以把以上推导过程用导数的另外一种符号表示如下．  
  
$\begin{align}&\,\mathrm{d}{y} = \frac{\mathrm{d}{y}}{\mathrm{d}{u}} \,\mathrm{d}{u} = \frac{\mathrm{d}{y}}{\mathrm{d}{u}} \frac{\mathrm{d}{u}}{\mathrm{d}{x}} \,\mathrm{d}{x}&(12)\\\end{align}$\begin{align}&\,\mathrm{d}{y} = \frac{\mathrm{d}{y}}{\mathrm{d}{u}} \,\mathrm{d}{u} = \frac{\mathrm{d}{y}}{\mathrm{d}{u}} \frac{\mathrm{d}{u}}{\mathrm{d}{x}} \,\mathrm{d}{x}&(12)\\\end{align}  
  
得  
$\begin{align}&\frac{\mathrm{d}{y}}{\mathrm{d}{x}} = \frac{\mathrm{d}{y}}{\mathrm{d}{u}} \frac{\mathrm{d}{u}}{\mathrm{d}{x}}&(13)\\\end{align}$\begin{align}&\frac{\mathrm{d}{y}}{\mathrm{d}{x}} = \frac{\mathrm{d}{y}}{\mathrm{d}{u}} \frac{\mathrm{d}{u}}{\mathrm{d}{x}}&(13)\\\end{align}  
  
这种书写方式让人不禁想把 $\mathrm{d}{y}/\mathrm{d}{x}$\mathrm{d}{y}/\mathrm{d}{x} 看做是 $\,\mathrm{d}{y}$\,\mathrm{d}{y} 和 $\,\mathrm{d}{x}$\,\mathrm{d}{x} 相除，这样的符号分割是错误的，尤其是在以后学习高阶导数和偏导数时．

  
**多重复合函数**  
　　 要对多重复合函数如 $f[g(h(x))]$f[g(h(x))] 求导， 可以先对 $g[h(x)]$g[h(x)] 求导得 $g'[h(x)]h'(x)$g'[h(x)]h'(x) 再得到  
  
$\begin{align}&f[g(h(x))]' = f'[g(h(x))]g'[h(x)]h'(x)&(14)\\\end{align}$\begin{align}&f[g(h(x))]'= f'[g(h(x))]g'[h(x)]h'(x)&(14)\\\end{align}  
  
令 $v = h(x)$v = h(x)， 用微分符号可以表示为  
$\begin{align}&\frac{\mathrm{d}{y}}{\mathrm{d}{x}} = \frac{\mathrm{d}{y}}{\mathrm{d}{u}} \frac{\mathrm{d}{u}}{\mathrm{d}{v}} \frac{\mathrm{d}{v}}{\mathrm{d}{x}}&(15)\\\end{align}$\begin{align}&\frac{\mathrm{d}{y}}{\mathrm{d}{x}} = \frac{\mathrm{d}{y}}{\mathrm{d}{u}} \frac{\mathrm{d}{u}}{\mathrm{d}{v}} \frac{\mathrm{d}{v}}{\mathrm{d}{x}}&(15)\\\end{align}  
  
任意多重的复合函数求导同理可得．

  
**例 2**　对函数求导  
  
  
$\begin{align}&\frac{1}{\sqrt{x^2+a^2}}&(16)\\\end{align}$\begin{align}&\frac{1}{\sqrt{x^2+a^2}}&(16)\\\end{align}  
  
首先令 $f(x) = 1/\sqrt{x}$f(x) = 1/\sqrt{x} 再令 $g(x) = x^2+a^2$g(x) = x^2+a^2， 上式等于 $f[g(x)]$f[g(x)]． 由基本初等函数的导数，  
$\begin{align}&f'(x) = -\frac{1}{2\sqrt{x^3}} \qquad g'(x) = 2x&(17)\\\end{align}$\begin{align}&f'(x) = -\frac{1}{2\sqrt{x^3}} \qquad g'(x) = 2x&(17)\\\end{align}  
  
代入[式 9](https://link.zhihu.com/?target=http%3A//wuli.wiki/changed/ChainR.html%23eq9) ， 得  
$\begin{align}&\frac{\mathrm{d}}{\mathrm{d}{x}} \frac{1}{\sqrt{x^2+a^2}} = f'[g(x)] g'(x) = -\frac{x}{\sqrt{(x^2+a^2)^3}}&(18)\\\end{align}$\begin{align}&\frac{\mathrm{d}}{\mathrm{d}{x}} \frac{1}{\sqrt{x^2+a^2}} = f'[g(x)] g'(x) = -\frac{x}{\sqrt{(x^2+a^2)^3}}&(18)\\\end{align}  
  
  
  
　　 一种较灵活的情况是，当三个变量只有一个自由度 [1](https://link.zhihu.com/?target=http%3A//wuli.wiki/changed/ChainR.html%23footnote1) 时，任何一个变量都可以看做任何另外两个变量的函数 [2](https://link.zhihu.com/?target=http%3A//wuli.wiki/changed/ChainR.html%23footnote2)，这时可以根据需要灵活运用链式法则，如[例 3](https://link.zhihu.com/?target=http%3A//wuli.wiki/changed/ChainR.html%23ex3) ．

  
**例 3**　加速运动公式  
　　 假设质点做一维运动，位移，速度和加速度分别记为 $x(t)$x(t)， $v(t) = \mathrm{d}{x}/\mathrm{d}{t}$v(t) = \mathrm{d}{x}/\mathrm{d}{t}， $a(t) = \mathrm{d}{v}/\mathrm{d}{t}$a(t) = \mathrm{d}{v}/\mathrm{d}{t}， 但若把速度 $v$v 看做复合函数 $v[x(t)]$v[x(t)]， 根据链式法则有  
  
$\begin{align}&a = \frac{\mathrm{d}{v}}{\mathrm{d}{t}} = \frac{\mathrm{d}{v}}{\mathrm{d}{x}} \frac{\mathrm{d}{x}}{\mathrm{d}{t}} = \frac{\mathrm{d}{v}}{\mathrm{d}{x}} v&(19)\\\end{align}$\begin{align}&a = \frac{\mathrm{d}{v}}{\mathrm{d}{t}} = \frac{\mathrm{d}{v}}{\mathrm{d}{x}} \frac{\mathrm{d}{x}}{\mathrm{d}{t}} = \frac{\mathrm{d}{v}}{\mathrm{d}{x}} v&(19)\\\end{align}  
  
写成微分表达式，有 $a \,\mathrm{d}{x} = v \,\mathrm{d}{v}$a \,\mathrm{d}{x} = v \,\mathrm{d}{v}． 注意到 $\,\mathrm{d}\left(v^2 \right) = 2v \,\mathrm{d}{v}$\,\mathrm{d}\left(v^2 \right) = 2v \,\mathrm{d}{v}， 代入得  
$\begin{align}&\,\mathrm{d}\left(v^2 \right) = 2a \,\mathrm{d}{x}&(20)\\\end{align}$\begin{align}&\,\mathrm{d}\left(v^2 \right) = 2a \,\mathrm{d}{x}&(20)\\\end{align}  
  
若质点做匀加速运动，该式的物理意义是在任何一段微小时间内，速度平方的增量正比于这段时间内的位移增量．在一段时间 $[t_1,t_2]$[t_1,t_2] 内把这些增量累加起来，就得到高中熟悉的运动学公式  
$\begin{align}&v_2^2-v_1^2 = 2a(x_2-x_1)&(21)\\\end{align}$\begin{align}&v_2^2-v_1^2 = 2a(x_2-x_1)&(21)\\\end{align}  
  
其中 $x_1,v_1$x_1,v_1 和 $x_1,v_1$x_1,v_1 分别是 $t_1,t_2$t_1,t_2 时刻的位置和速度．  
  

1. 即任何一个变量值确定后，另外两个变量也随之确定  
2. 姑且假设不会出现一个自变量对应两个函数值的情况